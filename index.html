<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mac delivery</title>
</head>
<body align="center">
    <p class="time" id="time">40</p>
    <img src="Image/chara.png" alt="chara" id="character" class="character">
    <img src="Image/desk.png" alt="" class="desk" width="1000px" height="600px">
    <img src="Image/image.png" alt="" class="bg" width="1000px" height="600px">
    <img src="Image/nbg_screen.png" alt="" class="nbg">
    <img src="Image/c_1.png" alt="" class="customer" id="cus">
    <img src="Image/fukidashi.png" class="fukidashi" alt="">
    <img src="Image/hum.png" alt="" class="hamburger" id="order_0">
    <img src="Image/mame.png" alt="" class="mame" id="order_1">
    <img src="Image/potato.png" alt="" class="potato" id="order_2">
    <img src="Image/hum.png" alt="" class="menu_0" id="menu_0">
    <img src="Image/mame.png" alt="" class="menu_1" id="menu_1">
    <img src="Image/potato.png" alt="" class="menu_2" id="menu_2">
    <img src="Image/yubi_0.png" alt="" class="yubi_0" id="yubi_0">
    <img src="Image/yubi_1.png" alt="" class="yubi_1" id="yubi_1">
    <img src="Image/life_0.png" alt="" class="life" id="life_0">
    <img src="Image/life_1.png" alt="" class="life" id="life_1">
    <img src="Image/life_2.png" alt="" class="life" id="life_2">
    <img src="Image/life_3.png" alt="" class="life" id="life_3">
    <img src="Image/gameover.png" alt="" class="finish" id="gameover">
    <img src="Image/gameclear.png" alt="" class="finish" id="gameclear">
    <img src="Image/co_nhat.png" alt="" class="co">
    <img src="Image/co_hat.png" alt="" class="co" id="hat">
    <img src="Image/order.png" alt="" class="order">
    <img src="Image/timer.png" alt="" class="Image_timer" id="">
    <img src="Image/score.png" alt="" class="Image_score" id="Image_score">
    <p class="score" id="score">0</p>
    <p class="re_score" id="re_score">0</p>
    <p class="re_hscore" id="re_hscore">0</p>
    <p class="return" id="return" onclick="home()">もどる</p>
    <div class="title_sc" id="title">
        <img src="Image/title.png" alt="" class="title" id="title_bg">
        <button type="button" class="start" onclick="start()" id="title_bu">ゲームスタート</button>
    </div>
    <div class="fail_text" id="fail_text">ゲームオーバー</div>
</body>
</html>
<script>
var c = document.getElementById('character');
var cRect = c.getBoundingClientRect();
var cx = c.style.left;
var cy = c.style.top;
var cnt = 0;
var a = 0;
var l = 0;
var i = 0;
var r_timer = setInterval(right,10000);
var l_timer = setInterval(left,10000);
var timer = setInterval(timer,1000)
var j = true;
var x = 0;
var y = 0;
var t = 40;
//oc = オーダーカウント
var oc = 5;
//life = ライフ（体力）
var life = 3;
var score = 0;
var hscore = 0;

var life_0 = document.getElementById("life_0");
var life_1 = document.getElementById("life_1");
var life_2 = document.getElementById("life_2");
var life_3 = document.getElementById("life_3");
var c0 = document.getElementById("yubi_0");
var c1 = document.getElementById("yubi_1");
var hat = document.getElementById("hat");
var menu_0 = document.getElementById("menu_0");
var menu_1 = document.getElementById("menu_1");
var menu_2 = document.getElementById("menu_2");
var order_0 = document.getElementById("order_0");
var order_1 = document.getElementById("order_1");
var order_2 = document.getElementById("order_2");
var title = document.getElementById("title_bg");
var title_b = document.getElementById("title_bu");
var bar = document.getElementById("bar");
var f_t = document.getElementById('fail_text');
var f_t = document.getElementById('fail_text');
var g_over = document.getElementById('gameover');
var g_clear = document.getElementById('gameclear');
var time_c = document.getElementById('time');
var score_c = document.getElementById('score');
var cus = document.getElementById('cus');
var re_score = document.getElementById('re_score');
var re_hscore = document.getElementById('re_hscore');
var home_button = document.getElementById('return');

var ocTime = setInterval(order_change,10);
var hat_j = false;
var menu_0_j = false;
var menu_1_j = false;
var menu_2_j = false;
var start = false;

function start(){
    t = 40;
    c0.style.zIndex = 200;
    c1.style.zIndex = 0;
    document.addEventListener('mousemove',cursor);
    document.addEventListener('mousedown',hover);
    document.addEventListener('mouseup',nhover);
    life_3.style.zIndex = 100;
    title.style.zIndex = 0;
    title_b.style.zIndex = 0;
    order_0.style.opacity = 0;
    order_1.style.opacity = 0;
    order_2.style.opacity = 0;
    start = true;
    order();
}

function home(){
    start = false;
    gameclear.style.zIndex = 0;
    gameover.style.zIndex = 0;
    title_bg.style.zIndex = 100;
    title_b.style.zIndex =  101;
    home_button.style.zIndex = 0;
    score = 0;
    life = 3;
    
}

function order(){
    score_c.innerHTML = score;
    order_0.style.opacity = 0;
    order_1.style.opacity = 0;
    order_2.style.opacity = 0;
    oc = Math.floor(Math.random()*(3 - 0) + 0);
    if(oc == 0){
        order_0.style.opacity = 1;
        order_1.style.opacity = 0;
        order_2.style.opacity = 0;
    }
    if(oc == 1){
        order_0.style.opacity = 0;
        order_1.style.opacity = 1;
        order_2.style.opacity = 0;
    }
    if(oc == 2){
        order_0.style.opacity = 0;
        order_1.style.opacity = 0;
        order_2.style.opacity = 1; 
    }
}

function animation(){
    cus.style.opacity = 0;
}

function timer(){
    if(t > 0 && start == true){
        // Math.floor(t*4)
        t -= 1;
        time_c.innerHTML = t;
    }
    else if(t == 0){
        gameclear.style.zIndex = 100;
        re_score.innerHTML = score;
        re_score.style.zIndex = 101;
        if(hscore <= score){
            re_hscore.innerHTML = score;
            re_hscore.style.zIndex = 100;
            hscore = score;
        }
        start = false;
    }
}

function cursor(){
    c0.style.left = event.clientX-100+'px';
    c0.style.top = event.clientY-100+'px';
    c1.style.left = event.clientX-100+'px';
    c1.style.top = event.clientY-100+'px';
    x = event.clientX;
    y = event.clientY;
    if(hat_j == true){
        hat.style.left = event.clientX-180+'px';
        hat.style.top = event.clientY-100+'px';
    }
    else if(menu_0_j == true){
        menu_0.style.left = event.clientX-170+'px';
        menu_0.style.top = event.clientY-70+'px';
    }
    else if(menu_1_j == true){
        menu_1.style.left = event.clientX-170+'px';
        menu_1.style.top = event.clientY-70+'px';
    }
    else if(menu_2_j == true){
        menu_2.style.left = event.clientX-120+'px';
        menu_2.style.top = event.clientY-100+'px';
    }
    else if(hat_j == false){
        nhover();
    }
    else if(menu_0_j == false){
        nhover();
    }
    else if(menu_1_j == false){
        nhover();
    }
    else if(menu_2_j == false){
        nhover();
    }
}

function hover(){
    //hat
    if(x > 150 && x < 330 && y > 300 && y < 400){
        hat_j = true;
        c0.style.zIndex = 0;
        c1.style.zIndex = 200;
    }
    //menu_0
    else if(x > 330 && x < 530 && y > 630 && y < 780){
        menu_0_j = true;
        c0.style.zIndex = 0;
        c1.style.zIndex = 200;
    }    
    //menu_1
    else if(x > 530 && x < 760 && y > 630 && y < 780){
        menu_1_j = true;
        c0.style.zIndex = 0;
        c1.style.zIndex = 200;
    }    
    //menu_2
    else if(x > 760 && x < 970 && y > 630 && y < 780){
        menu_2_j = true;
        c0.style.zIndex = 0;
        c1.style.zIndex = 200;
    }    
}
function nhover(){
    c0.style.zIndex = 200;
    c1.style.zIndex = 0;
    hat.style.left = 50+'px';
    hat.style.top = 250+'px';
    menu_0.style.left = 260+'px';
    menu_0.style.top = 630+'px';
    menu_1.style.left = 470+'px';
    menu_1.style.top = 630+'px';
    menu_2.style.left = 760+'px';
    menu_2.style.top = 600+'px';
    if(x > 500 && x < 1030 && y < 500 && y > 100){
        if(menu_0_j == true && oc == 0){
            score += 180;
            order();
            menu_0_j = false;
            // animation();
        }
        if(menu_1_j == true && oc == 1){
            score += 250;
            order();
            menu_1_j = false;
        }
        if(menu_2_j == true && oc == 2){
            score += 160;
            order();
            menu_2_j = false;
        }
        else if(menu_0_j == true && oc !== 0){
            miss();
        }
        else if(menu_1_j == true && oc !== 1){
            miss();
        }
        else if(menu_2_j == true && oc !== 2){
            miss();
        }
    }
    hat_j = false;
    menu_0_j = false;
    menu_1_j = false;
    menu_2_j = false;
}

function miss(){
            　if(life == 1){
                home_button.style.zIndex = 201;
                gameover.style.zIndex = 100;
                re_score.innerHTML = score;
                re_score.style.zIndex = 101;
                start = false;
            }
            else if(life == 2){
                life_2.style.zIndex = 0;
                life_1.style.zIndex = 100;
            }
            else if(life == 3){
                life_3.style.zIndex = 0;
                life_2.style.zIndex = 100;
            }
            life -= 1;
}

document.onkeydown = key;
function key(event){
    if(event.which == 39 && j == true && cnt < 2){
        i = 0;
        clearInterval(r_timer);
        r_timer = setInterval(right,10);
    }
    else if(event.which == 37 && j == true && cnt > -1){
        l = 0;
        clearInterval(l_timer);
        l_timer = setInterval(left,10);
    }
}

function right(){
    if(i < 180){
        a += 9;
        c.style.left = (500+a)+'px';
        i += 9;
        j = false;
    }
    else if(i == 180){
        i = 0;
        clearInterval(r_timer);
        j = true;
        cnt += 1;
    }
}

function left(){
    if(l < 180){
        a -= 9;
        c.style.left = (500+a)+'px';
        l += 9;
        j = false;
    }
    else if(l == 180){
        l = 0;
        clearInterval(l_timer);
        j = true;
        cnt -= 1;
    }
}

function move(){
    c.style.left =  (150*cnt+500)+'px';
}

</script>
<style>
    body{
        margin: 0;
    }
    body:hover{
        cursor: none;
    }
    .character{
        position: absolute;
        left: 500px;
        width: 350px;
        height: 400px;
        z-index: 0;
        top: 300px;
    }
    .bg{
        width: 100%;
        height:100%;
        position: absolute;
        z-index: 1;
        left: 0px;
    }
    .desk{
        position: absolute;
        z-index: 15;
        width: 100%;
        height: 100%;
        left: 0px;
        cursor: none;
    }
    .nbg{
        width: 100%;
        height: 100%;
        position: absolute;
        z-index: 3;
        left: 0px;
    }
    .customer{
        position: absolute;
        z-index: 2;
        width: 250px;
        height: 250px;
        top: 250px;
    }
    .fukidashi{
        position: absolute;
        z-index: 4;
        height: 300px;
        width: 300px;
        left: 500px;
        top: 50px;
    }
    .hamburger{
        width: 350px;
        height: 130px;
        z-index: 5;
        position: absolute;
        top: 135px;
        left: 480px;
        opacity: 0;
    }
    .mame{
        width: 350px;
        height: 130px;
        z-index: 5;
        position: absolute;
        top: 135px;
        left: 480px;
        opacity: 0;
    }
    .potato{
        width: 150px;
        height: 150px;
        z-index: 5;
        position: absolute;
        top: 135px;
        left: 570px;
        opacity: 0;
    }
    .yubi_0{
        position: absolute;
        height: 200px;
        width: 200px;
        z-index: 50;
        cursor: none;
        -webkit-user-drag: none;
    }
    .yubi_0:hover{
        cursor: none;
    }
    .yubi_1{
        position: absolute;
        height: 200px;
        width: 200px;
        z-index: 0;
        cursor: none;
        -webkit-user-drag: none;
    }
    .yubi_1:hover{
        cursor: none;
    }
    .co{
        height: 400px;
        width: 280px;
        position: absolute;
        left: 50px;
        top: 250px;
        z-index: 10;
    }
    .menu_0{
        position: absolute;
        z-index: 30;
        width: 250px;
        height: 100px;
        left: 260px;
        top: 630px;
    }
    .menu_1{
        position: absolute;
        z-index: 30;
        width: 280px;
        height: 100px;
        left: 470px;
        top: 630px;
    }
    .menu_2{
        position: absolute;
        z-index: 30;
        width: 150px;
        height: 150px;
        left: 760px;
        top: 600px;
    }
    .order{
        position: absolute;
        z-index: 0;
        height: 400px;
        width: 400px;
        top: 50px;
        left: 300px;
    }
    .title{
        position: absolute;
        width: 100%;
        height: 100%;
        z-index: 100;
        left: 0;
    }
    .title:hover{
        cursor: auto;
    }
    .start{
        background-color: rgba(255, 255, 255, 0.61);
        border: solid 1px rgb(90, 58, 32);
        border-radius: 20px;
        font-size: 30px;
        height: 90px;
        width: 300px;
        z-index: 101;
        position: absolute;
        font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
        left: 550px;
        top: 500px;
    }
    .start:hover{
        background-color: rgba(255, 255, 255, 0.9);
        cursor: pointer;
    }
    .bar{
        width: 600px;
        height: 25px;
        border: solid white 10px;
        border-radius: 30px;
        background-color: rgb(162, 208, 249);
        position: absolute;
        z-index: 60;
        left: 400px;
        top: 20px;
    }
    .bar_bg{
        width: 600px;
        height: 25px;
        border: solid white 10px;
        border-radius: 10px;
        background-color: white;
        position: absolute;
        z-index: 59;
        left: 400px;
        top: 20px;
        color: #6aff3c;
    }
    .fail_text{
        z-index: 0;
        position: absolute;
        font-size: 100px;
        color: white;

    }
    .life{
        left: 0px;
        width: 100%;
        height: 100%;
        position: absolute;
        z-index: 0;
        -webkit-user-drag: none;
    }
    .finish{
        left: 0px;
        width: 100%;
        height: 100%;
        position: absolute;
        z-index: 0;
        -webkit-user-drag: none;
    }
    .Image_timer{
        left: 0px;
        width: 100%;
        height: 100%;
        position: absolute;
        z-index: 100;
        -webkit-user-drag: none;
        cursor: none;
    }
    .time{
        position: absolute;
        z-index: 100;
        font-size: 80px;
        left: 150px;
        top: 25px;
        margin: 0px;
        color: white;
        letter-spacing: 10px;
        -webkit-text-stroke: black 2px;
        font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
        cursor: none;
    }
    .Image_score{
        left: 0px;
        width: 100%;
        height: 100%;
        position: absolute;
        z-index: 40;
        -webkit-user-drag: none;
        cursor: none;
    }
    .score{
        position: absolute;
        z-index: 41;
        font-size: 50px;
        right: 1215px;
        top: 713px;
        margin: 0px;
        color: rgb(237, 237, 203);
        letter-spacing: 5px;
        -webkit-text-stroke: rgb(177, 161, 161) 2px;
        font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
        cursor: none;
    }
    .re_score{
        position: absolute;
        z-index: 0;
        font-size: 55px;
        right: 550px;
        top: 450px;
        margin: 0px;
        color: rgb(255, 255, 255);
        letter-spacing: 6px;
        -webkit-text-stroke: rgb(0, 0, 0) 2px;
        font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
        cursor: none;
    }
    .re_hscore{
        position: absolute;
        z-index: 0;
        font-size: 55px;
        right: 550px;
        top: 573px;
        margin: 0px;
        color: rgb(255, 255, 255);
        letter-spacing: 6px;
        -webkit-text-stroke: rgb(0, 0, 0) 2px;
        font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
        cursor: none;
    }
    .return{
        position: absolute;
        z-index: 201;
        font-size: 35px;
        right:100px;
        top: 30px;
        margin: 0px;
        color: rgb(255, 255, 255);
        background-color: orange;
        border-radius: 5px;
        padding-left: 10px;
        padding-right: 10px;
        border: black solid 1px;
        letter-spacing: 2px;
        font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
        cursor: none;
    }
    .return:hover{
        position: absolute;
        z-index: 201;
        font-size: 45px;
        right:85px;
        top: 20px;
        margin: 0px;
        color: rgb(255, 255, 255);
        background-color: orange;
        border-radius: 5px;
        padding-left: 10px;
        padding-right: 10px;
        border: black solid 1px;
        letter-spacing: 2px;
        font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
        cursor: none;

    }
</style>